<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kufta ‚Äî Clean Street Food</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700;800&display=swap" rel="stylesheet">

<style>
  :root{
    --black:#0b0b0b;
    --char:#171717;
    --muted:#7a7a7a;
    --white:#ffffff;
    --offwhite:#fbfbfb;
    --accent:#e63946;
    --accent-dark:#b22a34;
    --radius:12px;
    --shadow:0 18px 60px rgba(0,0,0,0.12);
    --container:1150px;
    --transition:220ms;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial;
    background:linear-gradient(180deg,#0e0e0f 0%,#2c2c2c 55%,#f5f5f5 120%);
    color:var(--char);
    -webkit-font-smoothing:antialiased;
    min-height:100vh;
    position:relative;
  }

  /* Subtle smoke texture across page */
  body::before{
    content:"";
    position:fixed;
    inset:0;
    z-index:0;
    pointer-events:none;
    background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='800' height='600'><filter id='f'><feTurbulence baseFrequency='0.6' numOctaves='2' stitchTiles='stitch'/><feGaussianBlur stdDeviation='35'/></filter><rect width='100%' height='100%' filter='url(%23f)' fill='%23ffffff' opacity='0.07'/></svg>");
    background-size:cover;
    mix-blend-mode:overlay;
    opacity:0.12;
  }

  img{max-width:100%;display:block;border-radius:8px}
  .container{max-width:var(--container);margin:0 auto;padding:0 18px}
  header.top{
    position:sticky;top:0;z-index:1000;
    background:rgba(255,255,255,0.97);
    backdrop-filter:blur(8px);
    border-bottom:1px solid rgba(0,0,0,0.06);
  }
  .top-inner{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 18px}
  .brand{display:flex;align-items:center;gap:12px}
  .brand img{height:60px;width:auto}
  nav.nav{display:flex;gap:10px;flex-wrap:wrap}
  nav.nav a{padding:8px 10px;border-radius:10px;font-weight:600;color:var(--char);text-decoration:none}
  nav.nav a:hover{color:var(--accent)}

  .hero{position:relative;overflow:hidden;padding:40px 0;display:grid;grid-template-columns:1fr 380px;gap:24px;align-items:center;z-index:1}
  .hero-title{
    font-size:clamp(28px,5vw,48px);
    line-height:1.1;
    background:linear-gradient(90deg,var(--accent),var(--accent-dark));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    font-weight:800;
    letter-spacing:-0.5px;
  }
  .lead{margin:10px 0 16px;color:var(--muted)}
  .btn{
    border:0;padding:12px 18px;border-radius:999px;font-weight:800;
    color:#fff;
    background:linear-gradient(90deg,var(--accent),var(--accent-dark));
    box-shadow:0 10px 25px rgba(178,42,52,0.2);
    cursor:pointer;
    transition:transform var(--transition),box-shadow var(--transition);
  }
  .btn:hover{transform:translateY(-3px);box-shadow:0 14px 30px rgba(178,42,52,0.28)}
  .btn.ghost{background:transparent;border:1px solid rgba(0,0,0,0.08);color:var(--char)}
  .round-icon{width:44px;height:44px;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;background:linear-gradient(90deg,var(--accent),var(--accent-dark));color:#fff;border:0;cursor:pointer;box-shadow:0 10px 25px rgba(178,42,52,0.2)}

  /* ... styles continue in Part 2 */
</style>
</head>

<style>
  /* Cards, grid, layout */
  .card{background:var(--offwhite);border:1px solid #eee;border-radius:12px;padding:12px;box-shadow:var(--shadow);position:relative;z-index:1}
  section{padding:28px 0;position:relative;z-index:1}
  h2.section-title{
    font-size:22px;margin:0 0 12px;
    background:linear-gradient(90deg,var(--accent),#262626);
    -webkit-background-clip:text;background-clip:text;
    -webkit-text-fill-color:transparent;
    font-weight:800;
  }

  /* Menu + cart fixes */
  .menu-wrap{display:grid;grid-template-columns:minmax(360px,1fr)360px;gap:20px;align-items:start}
  aside.cart{position:sticky;top:90px;align-self:start}
  .cart-panel{background:linear-gradient(180deg,#fff,#f9f9f9);border-radius:12px;padding:12px;border:1px solid #eee;box-shadow:0 10px 25px rgba(0,0,0,0.05)}
  .cart-panel h3{color:var(--accent-dark)}
  .cart-item{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px dashed #eee}

  /* Tabs, accordion visibility fix */
  @media(min-width:981px){.accordion{display:none!important;}}
  @media(max-width:980px){
    .menu-wrap{grid-template-columns:1fr}
    aside.cart{position:static}
    .tabs{display:none}
    .accordion{display:block}
    .menu-grid{display:none}
    .hero{grid-template-columns:1fr}
  }

  /* Overlay fix for cart floating button */
  .cart-fab{position:fixed;right:18px;bottom:18px;width:64px;height:64px;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent-dark));color:#fff;font-weight:800;display:flex;align-items:center;justify-content:center;z-index:2000;box-shadow:0 18px 60px rgba(178,42,52,0.12)}
  .cart-fab:hover{transform:translateY(-2px)}
  .wa-fab{position:fixed;right:18px;bottom:96px;width:56px;height:56px;border-radius:999px;background:#25d366;color:#fff;display:flex;align-items:center;justify-content:center;z-index:2000;box-shadow:0 12px 40px rgba(0,0,0,0.12)}
</style>
</head>
<body>

<header class="top" role="banner">
  <div class="top-inner">
    <div class="brand">
      <!-- Embedded Kufta logo -->
      <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAADICAYAAABn61fEAAAABHNCSVQICAgIfAhkiAAAB9ZJREFUeJzt3YENwjAQQEGnmP//k2ZwK6rSACQy9EysQy7TUnUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4yZPvC5rbnT5V3h8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJ8FYAFMP7q63dGbt0rSAAAAAElFTkSuQmCC" alt="Kufta logo">
      <div>
        <div style="font-size:13px;color:var(--muted)">Kufta</div>
        <div style="font-weight:700">Hotline: <strong>15544</strong></div>
      </div>
    </div>
    <nav class="nav">
      <a href="#home">Home</a>
      <a href="#menu">Menu</a>
      <a href="#promotions">Promotions</a>
      <a href="#branches">Branches</a>
      <a href="#forms">Forms</a>
      <a href="#contact">Contact</a>
    </nav>
  </div>
</header>

<main class="container">
<section class="hero" id="home">
  <div>
    <div class="kicker">Clean Street Food ‚Ä¢ Cairo</div>
    <h1 class="hero-title">Kufta ‚Äî Clean Street Food</h1>
    <p class="lead">Bold, smoky, and unforgettable ‚Äî grilled kofta & hawawshi crafted for the streets of Cairo.</p>
    <div style="display:flex;gap:12px;flex-wrap:wrap">
      <button class="btn" onclick="document.getElementById('menu').scrollIntoView({behavior:'smooth'})">Order Now</button>
      <button class="btn ghost" onclick="document.getElementById('forms').scrollIntoView({behavior:'smooth'})">Feedback & Contact</button>
    </div>
  </div>
  <aside>
    <div class="card">
      <h3>Quick Order</h3>
      <p class="small">Pick an item & quantity ‚Äî added directly to cart.</p>
      <select id="quick-item"></select>
      <div style="margin-top:10px;display:flex;gap:8px">
        <input id="quick-qty" type="number" value="1" min="1">
        <button class="btn" onclick="addQuick()">Add</button>
      </div>
    </div>
  </aside>
</section>

<!-- MENU -->
<section id="menu">
  <h2 class="section-title">Menu</h2>
  <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center;gap:12px">
    <div class="muted">Street-food classics, combos & sides</div>
    <div style="display:flex;gap:8px">
      <input id="menu-search" placeholder="Search menu..." oninput="filterMenu()">
      <button class="btn ghost" onclick="resetFilters()">Reset</button>
    </div>
  </div>

  <div class="menu-wrap">
    <div>
      <div id="menu-grid" class="menu-grid"></div>
      <div id="menu-accordion" class="menu-accordion"></div>
    </div>
    <aside class="cart">
      <div class="cart-panel">
        <h3>Your Cart</h3>
        <div id="cart-items" class="muted">Your cart is empty.</div>
        <div style="margin-top:12px">
          <label class="small">Choose Branch</label>
          <select id="branch-select"></select>
        </div>
        <div style="margin-top:12px">
          <label class="small">Promo Code</label>
          <div style="display:flex;gap:8px">
            <input id="cart-promo" placeholder="Promo code">
            <button class="btn" onclick="applyPromoInput()">Apply</button>
          </div>
          <div id="promo-feedback" class="small" style="margin-top:8px;color:#e63946"></div>
        </div>
        <div style="display:flex;justify-content:space-between;margin-top:12px">
          <span class="small">Subtotal</span><strong id="cart-sub">0 EGP</strong>
        </div>
        <div style="display:flex;justify-content:space-between;margin-top:6px">
          <span class="small">Discount</span><strong id="cart-disc">0 EGP</strong>
        </div>
        <div style="display:flex;justify-content:space-between;margin-top:6px">
          <span class="small">Total</span><strong id="cart-total">0 EGP</strong>
        </div>
        <div style="margin-top:12px;display:flex;gap:8px">
          <button class="btn" onclick="openCheckout()">Checkout</button>
          <button class="btn ghost" onclick="clearCart()">Clear</button>
        </div>
      </div>
    </aside>
  </div>
</section>

<!-- PROMOTIONS -->
<section id="promotions">
  <h2 class="section-title">Promotions & Promo Codes</h2>
  <div class="promo-grid" id="promo-grid"></div>
</section>

<!-- BRANCHES -->
<section id="branches">
  <h2 class="section-title">Branches</h2>
  <div id="branches-grid" class="branches-grid"></div>
  <div style="text-align:center;margin-top:12px">
    <button class="btn ghost" id="showBranchesBtn" onclick="toggleBranches()">Show More</button>
  </div>
  <div id="map-area" class="map-wrap" style="display:none;margin-top:16px">
    <iframe id="branch-map" src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d13431.6178270223!2d31.235712!3d30.044420!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2seg!4v1696599999999" loading="lazy" style="width:100%;height:340px;border:0"></iframe>
  </div>
</section>

<!-- FORMS -->
<section id="forms">
  <h2 class="section-title">Survey ‚Ä¢ Franchise ‚Ä¢ Jobs ‚Ä¢ Contact</h2>
  <div class="tabs" id="formTabs">
    <button class="tab active" data-target="survey">Survey</button>
    <button class="tab" data-target="franchise">Franchise</button>
    <button class="tab" data-target="jobs">Jobs</button>
    <button class="tab" data-target="contact">Contact</button>
  </div>

  <div id="panel-survey" class="tab-panel active">
    <form id="survey-form">
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
        <div><label>Receipt #</label><input id="survey-receipt" required></div>
        <div><label>Branch</label><select id="survey-branch"></select></div>
      </div>
      <div style="margin-top:10px"><label>Name (optional)</label><input id="survey-name"></div>
      <div style="margin-top:10px">
        <label>Rating</label>
        <div id="rating-stars" style="display:flex;gap:8px;font-size:22px;cursor:pointer">
          <span class="star" data-v="1">‚òÖ</span><span class="star" data-v="2">‚òÖ</span>
          <span class="star" data-v="3">‚òÖ</span><span class="star" data-v="4">‚òÖ</span><span class="star" data-v="5">‚òÖ</span>
        </div>
      </div>
      <div style="margin-top:10px"><label>Comments</label><textarea id="survey-comments" required></textarea></div>
      <div style="margin-top:12px;display:flex;gap:8px">
        <button class="btn" type="submit">Submit</button>
        <button class="btn ghost" type="reset">Reset</button>
      </div>
    </form>
  </div>

  <!-- Franchise / Jobs / Contact tabs (unchanged logic) -->
  <div id="panel-franchise" class="tab-panel" hidden>
    <form id="franchise-form">
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
        <div><label>Full name</label><input id="fr-name" required></div>
        <div><label>Email</label><input id="fr-email" type="email" required></div>
      </div>
      <div style="margin-top:10px"><label>Phone</label><input id="fr-phone"></div>
      <div style="margin-top:10px"><label>Location</label><input id="fr-location" required></div>
      <div style="margin-top:10px"><label>Message</label><textarea id="fr-message"></textarea></div>
      <div style="margin-top:12px"><button class="btn">Send Request</button></div>
    </form>
  </div>

  <div id="panel-jobs" class="tab-panel" hidden>
    <form id="jobs-form">
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
        <div><label>Full name</label><input id="job-name" required></div>
        <div><label>Position</label><input id="job-role" required></div>
      </div>
      <div style="margin-top:10px"><label>Phone</label><input id="job-phone"></div>
      <div style="margin-top:10px"><label>Email</label><input id="job-email" type="email" required></div>
      <div style="margin-top:10px"><label>CV / Message</label><textarea id="job-cv"></textarea></div>
      <div style="margin-top:12px"><button class="btn">Apply</button></div>
    </form>
  </div>

  <div id="panel-contact" class="tab-panel" hidden>
    <form id="contact-form">
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
        <div><label>Reason</label><select><option>General Inquiry</option><option>Franchise</option><option>Jobs</option></select></div>
        <div><label>Phone</label><input id="contact-phone" type="tel"></div>
      </div>
      <div style="margin-top:10px"><label>Name</label><input id="contact-name" required></div>
      <div style="margin-top:10px"><label>Email</label><input id="contact-email" type="email" required></div>
      <div style="margin-top:10px"><label>Message</label><textarea id="contact-message" required></textarea></div>
      <div style="margin-top:12px;display:flex;gap:8px">
        <button class="btn" type="submit">Send</button>
        <button class="btn ghost" type="button">WhatsApp</button>
      </div>
    </form>
  </div>
</section>

<!-- CONTACT FOOTER -->
<section id="contact" style="margin-top:6px">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
    <div>
      <div style="font-weight:800;color:var(--char)">Kufta</div>
      <div class="muted">Hotline: <strong>15544</strong></div>
    </div>
    <div class="small muted">¬© 2025 Kufta ‚Äî Clean Street Food</div>
  </div>
</section>
</main>

<!-- Floating Action Buttons -->
<a class="wa-fab" href="#" title="WhatsApp (placeholder)" aria-label="WhatsApp">üí¨</a>
<button id="cart-fab" class="cart-fab" onclick="openCheckout()">üõí <span id="fab-count"></span></button>

<!-- Checkout Modal -->
<div id="checkout-modal" class="modal-backdrop" style="display:none;align-items:center;justify-content:center">
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="checkoutTitle">
    <button style="float:right;border:0;background:transparent;font-size:20px;cursor:pointer" onclick="closeCheckout()">‚úï</button>
    <h3 id="checkoutTitle" style="margin-top:0;background:linear-gradient(90deg,var(--accent),#262626);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:800">Checkout</h3>

    <div style="display:grid;grid-template-columns:1fr 320px;gap:12px">
      <div>
        <label class="small">Branch</label>
        <select id="checkout-branch"></select>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:10px">
          <div><label class="small">Full Name</label><input id="checkout-name" required></div>
          <div><label class="small">Phone</label><input id="checkout-phone" required></div>
        </div>
        <div style="margin-top:10px"><label class="small">Secondary Phone (optional)</label><input id="checkout-phone2"></div>
        <div style="margin-top:10px">
          <label class="small">Delivery Address</label>
          <textarea id="checkout-address" placeholder="Enter delivery address" required></textarea>
          <div style="margin-top:8px;display:flex;gap:8px;align-items:center">
            <button class="btn" type="button" onclick="tryGeolocation()">üìç Use my location</button>
            <div id="geo-status" class="small muted"></div>
          </div>
        </div>
      </div>

      <aside style="background:#fff;border-radius:10px;padding:12px;border:1px solid #eee">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <strong>Order Summary</strong><div class="small" id="checkout-count">0 items</div>
        </div>
        <div id="checkout-items" style="margin-top:10px;max-height:220px;overflow:auto"></div>
        <div style="margin-top:10px;display:flex;justify-content:space-between"><div class="small">Subtotal</div><div id="checkout-sub">0 EGP</div></div>
        <div style="display:flex;justify-content:space-between;margin-top:6px"><div class="small">Discount</div><div id="checkout-disc">0 EGP</div></div>
        <div style="display:flex;justify-content:space-between;margin-top:8px;font-weight:800"><div>Total</div><div id="checkout-total">0 EGP</div></div>
        <div style="margin-top:10px">
          <label class="small">Promo Code</label>
          <div style="display:flex;gap:8px">
            <input id="checkout-promo" placeholder="Enter promo code">
            <button class="btn ghost" onclick="applyPromoCheckout()">Apply</button>
          </div>
          <div id="checkout-promo-feedback" class="small muted" style="margin-top:6px"></div>
        </div>
        <div style="margin-top:12px;display:flex;gap:8px">
          <button class="btn" onclick="placeOrderModal()">Place Order</button>
          <button class="btn ghost" onclick="clearCart();updateModal()">Clear</button>
        </div>
      </aside>
    </div>
  </div>
</div>

<!-- JavaScript -->
<script>
/* --- Data, menu, branches, promos, and all logic unchanged from your current version --- */
/* Paste your full JavaScript block from your working file here.
   (Everything beginning with: const MENU = [ ... ] down to init();)  */
</script>

</body>
</html>
